<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>3 Car Race</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background-color: #ccc;
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    .track {
      position: relative;
      width: 100%;
      height: 200px;
      margin-bottom: 40px;
      background-color: #fff;
      border: 2px solid #333;
    }

    .car {
      position: absolute;
      width: 100px;
      height: auto;
      left: 0;
      transition: left 0.05s linear;
    }

    #car1 { top: 20px; }
    #car2 { top: 80px; }
    #car3 { top: 140px; }

    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }

    .winner {
      margin-top: 20px;
      font-size: 20px;
      font-weight: bold;
    }

.finish-line {
  position: absolute;
  right: 10px;
  top: 0;
  width: 4px;
  height: 100%;
  background-color: red;
  z-index: 1;
}
  </style>
</head>
<body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <h2>3 Car Race</h2>
  <div class="track">
	<div class="finish-line"></div>
    <img id="car1" class="car" src="pirrencode/wadt_frontend_lecture_2025/web_events_workshop/assets/A1.png" alt="Formula 1">
    <img id="car2" class="car" src="pirrencode/wadt_frontend_lecture_2025/web_events_workshop/assets/A2.png" alt="Formula 2">
    <img id="car3" class="car" src="pirrencode/wadt_frontend_lecture_2025/web_events_workshop/assets/A3.png" alt="Formula 3">
  </div>

  <button onclick="startRace()">Start Race</button>

  <div class="winner" id="winnerText"></div>

<script>
  function startRace() {
    const cars = [
      { id: '#car1', pos: 0 },
      { id: '#car2', pos: 0 },
      { id: '#car3', pos: 0 }
    ];

    $('#winnerText').text('');

    const carWidth = 100;
    const finishLine = $(window).width() - carWidth - 10;

    // Atiestatƒ´t pozƒ´cijas
    cars.forEach(car => {
      car.pos = 0;
      $(car.id).css('left', '0px');
    });

    let raceOver = false;

    const interval = setInterval(() => {
      cars.forEach(car => {
        if (!raceOver) {
          car.pos += Math.random() * 10;
          $(car.id).css('left', car.pos + 'px');

          if (car.pos >= finishLine && !raceOver) {
            raceOver = true;
            clearInterval(interval);
            $('#winnerText').text(`üèÅ ${car.id.toUpperCase()} Wins!`);
          }
        }
      });
    }, 50);
  }
</script>

</body>
</html>


